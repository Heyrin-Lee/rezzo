<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">
<head>
<meta charset="UTF-8">
<title>출고 등록</title>
<style>
	.c_btn {
   color: #fff;
   font-size: 13px;
   background: #333;
   border: none;
   padding: 6px;
   border-radius: 4px
}

/* 탭버튼 눌렀을시 글자 색상변경 */
.card-header .tab li.on a {
	font-weight: bold;
	color: crimson;
}
/* 탭박스 영역 기본 옵션은 디스플레이 숨김 */
.card-body .tabBox {
	display: none;
}
/* 탭버튼이 눌러졌을시 관련된 탭박스 활성화 */
.card-body .tabBox.on {
	display: block;
}
</style>
</head>
<body>
<!-- 본문내용 -->
<th:block layout:fragment="main">  
	<div class="container-fluid px-4">
		<h1 class="mt-4">영업관리</h1>
		<ol class="breadcrumb mb-4">
			<li class="breadcrumb-item"><a href="home.do">홈</a></li>
			<li class="breadcrumb-item">> 출고관리</li>
			<li class="breadcrumb-item active">> 출고 등록</li>
		</ol>
<div id="cont">
	<div class="container-fluid px-4">
		<div class="card mb-4">	 
		</div>
		<div class="row">
			<div class="col-lg-6">
				<div class="card mb-4">
					<div class="card-header">
						<i class="fas fa-chart-bar me-1"></i> 진행중 주문서 현황
					</div>
					<div class="card-body">
						<div id="grid"></div>
					</div>
				</div>
			</div>
			<div class="col-lg-6">
				<div class="card mb-4">
					<div class="card-header">
						<i class="fas fa-chart-pie me-1"></i> 출고 등록 현황
					<button class="c_btn">확인</button>
						
					</div>
					<div class="card-body">
						<div id="grid2"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
	</div>
	
	<!-- modal -->
	<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">검사내역</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div id="grid3" class="modal-body"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                    <button type="button" class="btn btn-primary">가져오기</button>
                </div>
            </div>
        </div>
    </div>
	
	<script>
	//진행중 주문서 현황 데이터
	$(function() {
		orderList();
		stcModal();
	})
	
		//주문서 전체 목록
		function orderList() {
			$.ajax({
				url:"orderList",
				dataType:"json",
				method:"get",
				success:function(orderlist){
					grid.resetData(orderlist);
				}
			})
		}
	
		//완제품 재고 현황 모달창
		function stcModal() {
			var focus = grid.getFocusedCell();
			$(".tui-grid-table").closest("tr").closest("td").data('column-name');
		} 
		
	
		//출고등록 현황 데이터
		const gridData2 = [
	      {
	        name: 'Beautiful Lies',
	        artist: 'Birdy',
	        release: '2016.03.26',
	        type: 'Deluxe',
	        genre: 'Pop'
	      },
	      {
	        name: 'X',
	        artist: 'Ed Sheeran',
	        release: '2014.06.24',
	        type: 'Deluxe',
	        genre: 'Pop',
	        _attributes: {
	          disabled: true // A current row is disabled
	        }
	      },
	      {
	        name: 'Moves Like Jagger',
	        release: '2011.08.08',
	        artist: 'Maroon5',
	        type: 'Single',
	        genre: 'Pop,Rock',
	        _attributes: {
	          checkDisabled: true // A checkbox is disabled only
	        }
	      },
	      {
	        name: 'A Head Full Of Dreams',
	        artist: 'Coldplay',
	        release: '2015.12.04',
	        type: 'Deluxe',
	        genre: 'Rock',
	        _attributes: {
	          checked: true, // A checkbox is already checked while rendering
	          className: {
	            // Add class name on a row
	            row: ['red']
	          }
	        }
	      },
	      {
	        name: '19',
	        artist: 'Adele',
	        release: '2008.01.27',
	        type: 'EP',
	        genre: 'Pop,R&B',
	        _attributes: {
	          rowSpan: {
	            // Merge rows
	            artist: 3,
	            genre: 2
	          }
	        }
	      },
	      {
	        name: '21',
	        artist: 'Adele',
	        release: '2011.01.21',
	        type: 'Deluxe',
	        genre: 'Pop,R&B'
	      },
	      {
		        name: '21',
		        artist: 'Adele',
		        release: '2011.01.21',
		        type: 'Deluxe',
		        genre: 'Pop,R&B'
		      },
	      {
	        name: '25',
	        artist: 'Adele',
	        release: '2015.11.20',
	        type: 'EP',
	        genre: 'Pop',
	        _attributes: {
	          className: {
	            // Add class name on each columns
	            column: {
	              type: ['blue'],
	              genre: ['blue']
	            }
	          }
	        }
	      }
	    ];
		
		//진행중 주문서 현황 그리드
	    const grid = new tui.Grid({
	      el: document.getElementById('grid'),
	      scrollX: false,
	      bodyHeight: 300,
	      rowHeight: 35,
	      rowHeaders: ['rowNum'],
	      header: {
	        height: 40
	      },
	      columns: [
	        {
	          header: '주문번호',
	          name: 'orderNo',
	          align: 'center'
	        },
	        {
	          header: '거래처',
	          name: 'vendNm',
	          align: 'center'
	        },
	        {
	          header: '완제품코드',
	          name: 'edctsCd',
	          align: 'center'
	        },
	        {
		      header: '제품명',
		      name: 'prdtNm',
		      align: 'center'
		        },
		    {
			  header: '주문수량',
			  name: 'orderCnt',
			  align: 'center'
			        }
	      ]
	    });
	    
		//출고 등록 현황 그리드
	    const grid2 = new tui.Grid({
	        el: document.getElementById('grid2'),
	        data: gridData2,
	        scrollX: false,
	        bodyHeight: 300,
	        rowHeight: 35,
	        rowHeaders: ['checkbox'],
	        columns: [
	          {
	            header: '완제품코드',
	            name: 'name'
	          },
	          {
	            header: '제품명',
	            name: 'artist'
	          },
	          {
	            header: '출고일자',
	            name: 'type'
	          },
	          {
	            header: '출고수량',
	            name: 'release'
	          }
	        ]
	      });
	
	 // 완제품 재고 모달 그리드
	    const grid3 = new tui.Grid({
	        el: document.getElementById('grid3'),
	        scrollX: false,
	        scrollY: false,
	        rowHeaders: ['checkbox'],
	        columns: [
	            {
	                header: '완제품코드',
	                name: 'edctsCd',
	                width: 100
	            },
	            {
	                header: '제품명',
	                name: 'prdtNm',
	                width: 100
	            },
	            {
	                header: '재고량',
	                name: 'stcCnt',
	                width: 100
	            },
	            {
	                header: '제조일자',
	                name: 'makeDt',
	                width: 100
	            },
	            {
	                header: '유통기한',
	                name: 'distbTerm',
	                width: 100
	            }
	            
	        ],
	        data: [
	            {
	                inspCd: '12-33',
	                inspDt: '13-23',
	                vend: '13-23',
	                cnt: '15-23'
	            }
	        ]
	    });
	</script>
</body>
</html>