<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">
<head>
<meta charset="UTF-8">
<title>출고 관리</title>
<style>
	.c_btn {
   color: #fff;
   font-size: 13px;
   background: #333;
   border: none;
   padding: 6px;
   border-radius: 4px
}
</style>
</head>
<body>
<!-- 본문내용 -->
<th:block layout:fragment="main">  
	<div class="container-fluid px-4">
		<h1 class="mt-4">영업관리</h1>
		<ol class="breadcrumb mb-4">
			<li class="breadcrumb-item"><a href="home.do">홈</a></li>
			<li class="breadcrumb-item">> 출고관리</li>
			<li class="breadcrumb-item active">> 출고 등록</li>
		</ol>
<!-- 본문내용 끝 -->

<!-- 주문서,출고 등록 그리드 -->
<div id="cont">
	<div class="container-fluid px-4">
		<div class="card mb-4">	 
		</div>
		<div class="row">
			<div class="col-lg-6">
				<div class="card mb-4">
					<div class="card-header">
						<i class="fas fa-chart-bar me-1"></i> 진행중 주문서 현황
					</div>
					<div class="card-body">
						<div id="grid"></div>
					</div>
				</div>
			</div>
			<div class="col-lg-6">
				<div class="card mb-4">
					<div class="card-header">
						<i class="fas fa-chart-pie me-1"></i> 출고 등록 현황
					<button class="c_btn">확인</button>
						
					</div>
					<div class="card-body">
						<div id="grid2"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
	</div>
<!-- 주문서,출고 등록 그리드 끝 -->

<script>

		$(function() {
			findOrder();
		})

		//진행중 주문서 현황 그리드
	    const grid = new tui.Grid({
	      el: document.getElementById('grid'),
	      scrollX: false,
	      bodyHeight: 300,
	      rowHeight: 35,
	      rowHeaders: ['checkbox'],
	      header: {
	        height: 40
	      },
	      columns: [
	        {
	          header: '주문번호',
	          name: 'orderNo'
	        },
	        {
	          header: '거래처',
	          name: 'vendNm'
	        },
	        {
	          header: '제품코드',
	          name: 'edctsCd'
	        },
	        {
		      header: '제품명',
		      name: 'prdtNm'
		        },
		    {
			  header: '주문수량',
			  name: 'orderCnt'
			        }
	      ]
	    });
	    
		//출고 등록 현황 그리드
	    const grid2 = new tui.Grid({
	        el: document.getElementById('grid2'),
	        scrollX: false,
	        bodyHeight: 300,
	        rowHeight: 35,
	        rowHeaders: ['rowNum'],
	        columns: [
	          {
	            header: '제품코드',
	            name: 'name',
	          },
	          {
	            header: '완제품LOT번호',
	            name: 'artist',
	            width: 100
	          },
	          {
	            header: '출고일자',
	            name: 'type'
	          },
	          {
	            header: '출고수량',
	            name: 'release'
	          }
	        ]
	      });
	      
	      //완제품 재고 현황 모달
	      const StcGrid = new tui.Grid({
	        el:document.getElementById('edctsSTCGrid'),
	        scrollX: false,
	        scrollY: false,
	        rowHeaders: ['checkbox'],
	        columns: [
	            {
	                header: '완제품LOT번호',
	                name: 'edctsCd',
	                align:'center'
	            },
	            {
	                header: '제품명',
	                name: 'prdtNm',
	                align:'center'
	            }
	        ]
	    });
	      
	  //진행중 주문서 현황 목록 불러오기
	  function findOrder() {
	  	$.ajax({
	  		url:"findOrder",
	  		method:"get",
	  		dataType:"json",
	  		success:function(list) {
	  			grid.resetData(list);
	  		}
	  	})
	  }
	  
	  //진행중 주문서 체크박스 클릭 -> 완제품 재고 목록 모달 띄우기
	  grid.on("click", e => {
	  	const {columnName} = e;
	  	OustRowKey = e.rowKey;
	  	let orderNoResult = grid.getValue(OustRowKey, 'orderNo');
	  	console.log(orderNoResult);
	  	if(columnName == 'orderNo') {
	  		console.log('a');
	  	}
	  })
</script>
</body>
</html>